---
import { 
  MapPin, 
  Building2, 
  Star, 
  ArrowRight, 
  Home, 
  ChevronDown,
  FileText,
  Download,
  Feather,
  CheckCircle2,
  Info
} from 'lucide-react';
import '../../styles/global.css';
import '../../styles/alpine-clarity.css';
import SEOHead from '../../components/common/SEOHead.astro';
import UniversalContactModal from '../../components/common/UniversalContactModal.tsx';
import '../../lib/expose-modal-stores.client.ts';
import Navbar from '../../components/layout/Navbar.astro';
import Footer from '../../components/layout/Footer.astro';
import HeroSearch from '../../components/home/HeroSearch.tsx';

// --- Data & Content ---

const neighborhoods = [
  {
    name: "St. Johann (Grossbasel)",
    type: "Novartis Hub",
    desc: "Modern architecture, parks, and direct access to the Novartis Campus. Vibrant and international with excellent restaurants and cultural venues.",
    rent: "CHF 3,200 - 5,000",
    vibe: "Modern & Dynamic"
  },
  {
    name: "Wettstein (Kleinbasel)",
    type: "Roche Radius",
    desc: "Historic charm with river views. Walking distance to the Roche Towers and the Rhine promenade. Popular with Roche executives.",
    rent: "CHF 3,000 - 4,500",
    vibe: "Historic & Riverside"
  },
  {
    name: "Gellert (Grossbasel)",
    type: "Executive Quarter",
    desc: "The aristocratic quarter. Quiet, green, and home to C-Suite executives seeking privacy. Beautiful villas and old-world elegance.",
    rent: "CHF 4,000 - 7,000+",
    vibe: "Prestigious & Quiet"
  },
  {
    name: "Binningen & Bottmingen (Basel-Land)",
    type: "Tax-Efficient Suburbs",
    desc: "Just minutes from the city, offering lower Basel-Land taxes and larger family houses. Popular with families seeking value and space.",
    rent: "CHF 2,800 - 4,500",
    vibe: "Family & Value"
  }
];

const costOfLiving = [
  { category: "Rent (3.5 rooms)", cost: "CHF 3,000 - 5,000", note: "Better value than ZH/GE" },
  { category: "Health Insurance", cost: "CHF 400 - 550", note: "Per adult / month" },
  { category: "Public Transport", cost: "CHF 88", note: "BVB/BLT Monthly Pass" },
  { category: "Kindergarten", cost: "~CHF 2,200", note: "Private / Bilingual (Month)" },
];

const faqs = [
  {
    q: "Should I live in France or Germany and commute?",
    a: "It looks cheaper on paper, but tax complexity (double taxation agreements, social security coordination) and traffic at bridge crossings often outweigh the rental savings for high earners. The EuroAirport traffic alone during peak hours can add 30-45 minutes to your commute."
  },
  {
    q: "Where is the International School of Basel (ISB)?",
    a: "The main campuses are in Reinach and Aesch (both in Basel-Land). Families often choose the southern suburbs like Binningen, Bottmingen, or Reinach specifically for easier school access and shorter commutes."
  },
  {
    q: "Is Basel English-friendly?",
    a: "Extremely. Due to the dominant presence of Roche, Novartis, and other pharma companies, English is essentially the unofficial second language in Basel. Most shops, restaurants, and services accommodate English speakers easily."
  }
];

---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <SEOHead 
      title="Relocation to Basel: The Complete 2026 Guide | ReloFinder"
      description="The definitive guide for moving to Basel. Housing near Roche & Novartis, neighborhoods, costs, and relocation checklists. Compare verified agencies and get free quotes."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        /* Swiss Passport Style Canton Cards Pattern */
        .canton-card-bg {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            color: #F1F5F9; 
            opacity: 0.4;
            line-height: 1;
        }
        
        /* Custom Gradient Text */
        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-image: linear-gradient(90deg, #2C3E50 0%, #FF6F61 100%);
        }
    </style>
</head>
<body class="font-sans text-slate-600 bg-[#F9FAFB] antialiased">

    <!-- 1. Navbar -->
    <Navbar />


    <!-- Hero Section -->
    <section class="relative py-20 lg:py-32 overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img 
                src="https://res.cloudinary.com/dphbnwjtx/image/upload/f_webp,q_auto:best/v1766820564/birdeye-ch-Ykwh8R4_cKY-unsplash_noh9pg" 
                alt="Basel cityscape with Rhine river and MÃ¼nster" 
                class="w-full h-full object-cover"
            />
            <!-- Gradient overlay: darker at top for navbar contrast -->
            <div class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/35 to-black/55"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div class="max-w-4xl mx-auto mb-12">
                <span class="inline-block py-1.5 px-4 rounded-full bg-black/80 border border-black/20 text-white text-sm font-bold mb-6 tracking-wide uppercase">
                    2026 City Guide
                </span>
                <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold tracking-tight text-white mb-6 leading-[1.1] drop-shadow-lg">
                    Relocation to <span class="text-[#FF6F61]">Basel</span>.
                </h1>
                <p class="text-lg md:text-xl text-white/90 font-medium max-w-2xl mx-auto drop-shadow-md">
                    The Life Sciences capital of the world. 
                    A strategic guide for executives at Roche, Novartis, and international families.
                </p>
            </div>

            <!-- Lead Magnet: Hero Search (Lead Wizard) -->
            <div class="max-w-3xl mx-auto relative z-10 text-left">
               <div class="bg-white rounded-2xl shadow-xl shadow-slate-900/5 border border-slate-200 p-1">
                   <HeroSearch client:load prefilledDestination="basel" />
               </div>
               <p class="text-center text-sm text-white/80 mt-6 font-medium drop-shadow">
                   Compare verified Basel relocation agencies. Get 3 quotes in 24h.
               </p>
            </div>
        </div>
    </section>

    <!-- 3. Strategic Overview: Why You Need Help -->
    <section class="py-24 bg-white border-y border-slate-100">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-8 text-center">
                Why relocating to Basel requires local insight.
            </h2>
            <div class="prose prose-lg prose-slate mx-auto text-slate-600 leading-relaxed">
                <p class="text-lg mb-6 text-center max-w-3xl mx-auto">
                    Basel is a city defined by two giants: <span class="font-bold text-slate-900">Roche</span> and <span class="font-bold text-slate-900">Novartis</span>. 
                    Your quality of life here is dictated by the Rhine river crossings. Choosing the wrong neighborhood 
                    can mean a daily commute struggle across the bridges.
                </p>
                
                <div class="bg-[#F9FAFB] p-8 rounded-2xl border border-slate-200 my-10">
                    <p class="text-lg leading-relaxed mb-6">
                        While housing is slightly more accessible than ZÃ¼rich, the competition for "turn-key" corporate apartments 
                        in <strong>St. Johann</strong> and <strong>Wettstein</strong> is fierce.
                        A professional relocation agency with <a href="/services/housing" class="text-[#FF6F61] font-medium hover:underline">Pharma network access</a> 
                        understands where to find the <a href="https://offlist.ch" class="text-[#FF6F61] font-medium hover:underline">shadow corporate inventory</a>.
                    </p>
                    <p class="text-lg leading-relaxed font-medium text-slate-800">
                        <strong>Relofinder</strong> connects you with agencies that specialize in Pharma relocation tracks and understand the tax implications of Basel-Stadt vs. Basel-Land.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. Neighborhood Decoder -->
    <section class="py-24 bg-[#F9FAFB] border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Where Pharma Executives Live</h2>
                <p class="text-slate-500 text-lg">Grossbasel vs. Kleinbasel: Crossing the Rhine matters.</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                {neighborhoods.map(hood => (
                    <div class="bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col h-full">
                        <div class="mb-6">
                            <span class="inline-block px-3 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded-full uppercase tracking-wider">
                                {hood.type}
                            </span>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-800 mb-3">{hood.name}</h3>
                        <p class="text-slate-600 mb-8 leading-relaxed flex-grow">
                            {hood.desc}
                        </p>
                        <div class="border-t border-slate-100 pt-6 mt-auto">
                            <div class="flex justify-between items-center mb-3">
                                <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Est. Rent</span>
                                <span class="text-sm font-bold text-slate-800">{hood.rent}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Vibe</span>
                                <span class="text-sm font-bold text-[#FF6F61]">{hood.vibe}</span>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
            
            <div class="mt-16 p-6 bg-white border border-slate-200 rounded-xl flex flex-col md:flex-row gap-6 items-center max-w-3xl mx-auto shadow-sm">
                <div class="p-3 bg-[#FF6F61]/10 rounded-full flex-shrink-0">
                    <Info className="w-6 h-6 text-[#FF6F61]" />
                </div>
                <div class="text-center md:text-left">
                    <p class="text-slate-800 text-sm leading-relaxed">
                        <strong class="block text-base mb-1">Pharma Insider Tip</strong> 
                        Many corporate apartments are handed over directly between departing and incoming employees. 
                        Use <a href="https://offlist.ch" target="_blank" class="font-bold underline decoration-[#FF6F61] decoration-2 underline-offset-2 hover:text-[#FF6F61] transition-colors">Offlist.ch</a> 
                        to access this "shadow inventory" before it hits the market.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. Cost of Living -->
    <section class="py-24 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Cost of Living 2026</h2>
                <div class="w-24 h-1 bg-[#FF6F61] mx-auto rounded-full mb-8"></div>
                <p class="text-slate-500 text-lg max-w-2xl mx-auto mb-4">
                    A family of four requires approximately <span class="font-bold text-slate-900 bg-slate-100 px-2 py-0.5 rounded">CHF 11,000</span> net monthly for a comfortable standard of living in Basel.
                </p>
                <p class="text-slate-500 text-base max-w-2xl mx-auto">
                    Note: <strong>Basel-Stadt</strong> has higher taxes than <strong>Basel-Land</strong>. Many families choose Basel-Land suburbs like Binningen or Reinach for this reason.
                </p>
            </div>

            <div class="bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm">
                <table class="w-full text-left">
                    <thead class="bg-slate-50 border-b border-slate-200">
                        <tr>
                            <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Item</th>
                            <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Cost Estimate</th>
                            <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest hidden sm:table-cell">Notes</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        {costOfLiving.map(item => (
                            <tr class="hover:bg-slate-50/50 transition-colors group">
                                <td class="p-6 font-bold text-slate-800 group-hover:text-[#FF6F61] transition-colors">{item.category}</td>
                                <td class="p-6 font-bold text-slate-700">{item.cost}</td>
                                <td class="p-6 text-slate-500 text-sm hidden sm:table-cell">{item.note}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>




            <!-- Interstitial CTA: Polished Dark Version -->
            <div class="mt-20 bg-[#1E293B] rounded-3xl p-12 md:p-16 text-center text-white relative overflow-hidden ring-1 ring-white/10 shadow-2xl">
                <div class="relative z-10 max-w-2xl mx-auto">
                    <h3 class="text-3xl md:text-4xl font-bold mb-6 tracking-tight text-white">Get Accurate Relocation Rates.</h3>
                    <p class="text-slate-300 text-lg mb-10 leading-relaxed">
                        Don't guess with your budget. Request verified quotes from our network of Basel relocation agencies.
                    </p>
                    <button onclick="window.universalOpenModal({ page: 'basel_guide', topic: 'cost_cta' })" class="inline-flex items-center gap-3 px-8 py-4 bg-[#FF6F61] hover:bg-[#f65d4e] text-white font-bold text-lg rounded-xl transition-all transform hover:-translate-y-1 shadow-lg">
                        <FileText className="w-5 h-5" />
                        Get Free Quotes
                    </button>
                    <p class="mt-6 text-slate-400 text-sm">Free service. No obligation.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. Relocation Timeline: Simple Card Layout -->
    <section class="py-24 bg-[#F9FAFB] border-t border-slate-200">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-16 text-center">Your Relocation Timeline</h2>
            
            <div class="space-y-8">
                <!-- Step 1 -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-[#FF6F61] rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg">
                            01
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">3 Months Out</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Visa & Permits</h3>
                            <p class="text-slate-600 leading-relaxed">
                                EU citizens have full mobility. Non-EU Pharma specialists need employer sponsorship. 
                                Roche and Novartis have dedicated HR teams for this â€” coordinate early.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-slate-200 rounded-xl flex items-center justify-center text-slate-500 font-bold text-lg">
                            02
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">2 Months Out</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Housing Search</h3>
                            <p class="text-slate-600 leading-relaxed">
                                Access the "shadow corporate inventory" via <a href="https://offlist.ch" class="text-[#FF6F61] font-medium hover:underline">Offlist.ch</a>. 
                                Many Pharma apartments transfer directly between employees without ever hitting the public market.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-slate-200 rounded-xl flex items-center justify-center text-slate-500 font-bold text-lg">
                            03
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">Arrival Week</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Registration at Einwohneramt</h3>
                            <p class="text-slate-600 leading-relaxed">
                                Register at the <strong>Einwohneramt</strong> (Kundenzentrum) within 14 days of arrival. 
                                Bring your lease, work contract, and passport. The Spiegelgasse location is the main office.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Health Insurance -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-slate-200 rounded-xl flex items-center justify-center text-slate-500 font-bold text-lg">
                            04
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">Within 3 Months</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Health Insurance</h3>
                            <p class="text-slate-600 leading-relaxed mb-4">
                                Living in Basel-Stadt vs. Basel-Land impacts your premium. Ensure your policy matches your registered canton.
                            </p>
                            <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                <p class="text-slate-700 text-sm leading-relaxed">
                                    <span class="font-bold">ðŸ’¡ Expert Tip:</span> Health insurance premiums vary by zip code. Use the 
                                    <a href="https://expat-savvy.ch/healthcare/best-health-insurance-switzerland/" target="_blank" rel="noopener" class="text-[#FF6F61] underline hover:text-[#f65d4e]">best health insurance guide</a> 
                                    at Expat-Savvy to compare providers and find the right plan.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="py-24 bg-white border-t border-slate-100">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Deep Dives & Market Insights</h2>
                <p class="text-slate-500 text-lg">Expert analysis for your Basel relocation.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <a href="/blog/best-relocation-agencies-switzerland-comparison" class="group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 block">
                    <div class="aspect-[16/9] overflow-hidden bg-slate-100">
                        <img 
                            src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=600&h=340&fit=crop&fm=webp" 
                            alt="Agency meeting" 
                            class="w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                        />
                    </div>
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="inline-block px-3 py-1 bg-[#FF6F61]/10 text-[#FF6F61] text-xs font-bold rounded-full uppercase tracking-wider">Agencies</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-[#FF6F61] transition-colors">Best Relocation Agencies Switzerland: A Transparency Guide</h3>
                        <p class="text-slate-600 text-sm leading-relaxed">How to find professional support for life science professionals and families in Basel.</p>
                    </div>
                </a>

                <!-- Card 2 -->
                <a href="/blog/cost-of-living-switzerland-breakdown-2026" class="group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 block">
                    <div class="aspect-[16/9] overflow-hidden bg-slate-100">
                        <img 
                            src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=600&h=340&fit=crop&fm=webp" 
                            alt="Swiss finance" 
                            class="w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                        />
                    </div>
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="inline-block px-3 py-1 bg-[#FF6F61]/10 text-[#FF6F61] text-xs font-bold rounded-full uppercase tracking-wider">Finance</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-[#FF6F61] transition-colors">The Real Cost of Living in Switzerland: 2026 Guide</h3>
                        <p class="text-slate-600 text-sm leading-relaxed">Analysis of taxes, rent, and childcare costs in Basel-Stadt vs. Basel-Land.</p>
                    </div>
                </a>

                <!-- Card 3 -->
                <a href="/blog/home-search-switzerland-agency-vs-platform" class="group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 block">
                    <div class="aspect-[16/9] overflow-hidden bg-slate-100">
                        <img 
                            src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=600&h=340&fit=crop&fm=webp" 
                            alt="Luxury Swiss apartment" 
                            class="w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                        />
                    </div>
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="inline-block px-3 py-1 bg-[#FF6F61]/10 text-[#FF6F61] text-xs font-bold rounded-full uppercase tracking-wider">Housing</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-[#FF6F61] transition-colors">Relocation Agencies vs. Selection Platforms (2026)</h3>
                        <p class="text-slate-600 text-sm leading-relaxed">How to decide between high-touch human service and digital efficiency in Basel.</p>
                    </div>
                </a>
            </div>
        </div>
    </section>


    <!-- 8. FAQ Section -->
    <section class="py-24 bg-white border-t border-slate-100">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-2xl md:text-3xl font-bold text-slate-800 mb-10 text-center">Frequently Asked Questions</h2>
            <div class="space-y-4">
                {faqs.map((faq) => (
                    <details class="group bg-[#F9FAFB] border border-slate-200 rounded-lg overflow-hidden">
                        <summary class="flex justify-between items-center p-5 cursor-pointer font-semibold text-slate-800 hover:bg-slate-100 transition-colors select-none text-lg">
                            {faq.q}
                            <ChevronDown className="w-5 h-5 text-slate-400 group-open:rotate-180 transition-transform" />
                        </summary>
                        <div class="px-5 pb-6 pt-2 text-slate-600 leading-relaxed border-t border-slate-100">
                            {faq.a}
                        </div>
                    </details>
                ))}
            </div>
        </div>
    </section>

    <!-- 8. Footer -->
    <Footer theme="dark" />

    <!-- Modal Globals -->
    <div id="relofinder-modal-marker" data-relofinder-modal="pending" style="display: none;" aria-hidden="true"></div>
    <UniversalContactModal client:load />
    
    <!-- Scripts (Exact same as index.astro for modal handling) -->
    <script is:inline>
      if (typeof window !== 'undefined') {
        window.modalEventQueue = window.modalEventQueue || [];
        window.modalReady = false;
        
        // Define functions immediately
        window.universalOpenModal = function(context) {
          const resolvedContext = context && typeof context === 'object' ? context : { page: 'basel_guide', topic: context };
          console.log('ðŸ“ž universalOpenModal called', resolvedContext);
          if (window.modalReady && window.relofinderModalStores) {
            window.relofinderModalStores.setContext(resolvedContext);
            window.relofinderModalStores.setOpen(true);
            return;
          }
          window.modalEventQueue.push({ kind: 'open', payload: resolvedContext });
        };

        window.closeModal = function() {
           if (window.modalReady && window.relofinderModalStores) {
            window.relofinderModalStores.setOpen(false);
          } else {
            window.modalEventQueue.push({ kind: 'close' });
          }
        };
      }
      
      // Browser-only setup
      if (typeof window !== 'undefined') {
        // Listen for React/Nanostores availability
        const checkInterval = setInterval(() => {
            if (window.relofinderModalStores) {
                window.modalReady = true;
                // Process queue
                window.modalEventQueue.forEach(item => {
                    if (item.kind === 'open') window.relofinderModalStores.setContext(item.payload), window.relofinderModalStores.setOpen(true);
                    if (item.kind === 'close') window.relofinderModalStores.setOpen(false);
                });
                window.modalEventQueue = [];
                clearInterval(checkInterval);
            }
        }, 100);
      }
    </script>
</body>
</html>
