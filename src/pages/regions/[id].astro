---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const regions = await getCollection('regions');
  return regions.map((region) => ({
    params: { id: region.data.id || region.slug },
    props: { region },
  }));
}

const { region } = Astro.props;
const { Content } = await region.render();

// Regional images mapping (same as main page)
const regionalImages = {
  'zurich': 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748054305/a-whimsical-slightly-quirky-photograph-d_zq8vecXuSUm5G0iW2zVS2A_ahKrzbyPSHujmZTV4weezQ_fefkl9.webp',
  'geneva': 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748054305/a-photograph-of-a-friendly-typical-swiss_jygtMk7MRVCGIR4b-pXn1w_u_7qRvYXQmqaQVXTr4FhIQ_exkzuu.webp',
  'basel': 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748054305/a-photograph-of-a-friendly-typical-swiss_byvGP0Q4RKyeAN-ygL2jbg_aTPr-BU2TWSrb4xXReYWMw_tw5r7l.webp',
  'bern': 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748054305/a-vibrant-slightly-whimsical-photograph-_j_Bc2kuLQfWixPiozYlkZg_3GfAV6UKRZKiLAd7QOavuA_mkvcga.webp',
  'lausanne': 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748054305/a-photograph-of-a-friendly-typical-swiss_s2o30GAgRB2T9AZDpXe4_A_RED4Ygx9Rw2E2XeYdgDzog_jyhysn.webp',
  'zug': 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748054307/a-whimsical-slightly-quirky-photograph-c_ESZqUcnqSiCNpGzcV89dBw_o-YAUo9-RbC7oy5d4C2v2Q_ehpyba.webp'
};

// Regional data with safety checks
const relocationStats = region.data.relocationStats || {
  expatsPercentage: 20,
  avgMoveTime: "4-6 weeks", 
  satisfaction: 4.0,
  topIndustries: ["Finance", "Technology", "Healthcare"]
};

const keyFacts = region.data.keyFacts || {
  costOfLiving: "CHF 3,000-5,000/month",
  avgRent: "CHF 1,500-3,000/month",
  taxRate: "15-25%", 
  internetSpeed: "100+ Mbps",
  publicTransport: "Excellent"
};

const livingCosts = region.data.livingCosts || {
  oneBedroomApt: { min: 1200, max: 2500 },
  threeBedroomApt: { min: 2500, max: 4500 },
  utilities: { min: 150, max: 250 },
  transportation: 85,
  groceries: 500,
  dining: { budget: 20, midRange: 50, highEnd: 100 }
};

const highlights = region.data.highlights || [
  "High quality of life and excellent infrastructure",
  "Strong international business community", 
  "World-class healthcare and education systems",
  "Beautiful natural surroundings and outdoor activities"
];

const districts = region.data.districts || [];
const population = typeof region.data.population === 'string' ? region.data.population : region.data.population?.toLocaleString() || 'N/A';

// Get hero image (use main page image if available, fallback to region data)
const currentRegionId = region.data.id || region.slug;
const regionKey = currentRegionId.toLowerCase();
const heroImage = (regionalImages as any)[regionKey] || region.data.image;

// Regional relocators - companies that serve this region
const regionalRelocators = [
  {
    name: 'PrimeRelocation',
    id: 'prime-relocation',
    specialty: 'Full-Service Relocation',
    description: 'Your trusted partner for seamless relocation to Switzerland.',
    logo: 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748055897/logoprimesmal_rb4hxo.webp',
    rating: 4.5,
    reviews: 312,
    services: ['Home Search', 'Immigration', 'Orientation', 'School Search'],
    regions: ['zurich', 'geneva', 'basel', 'zug', 'bern']
  },
  {
    name: 'Auris Relocation',
    id: 'auris-relocation', 
    specialty: 'Corporate Global Mobility',
    description: 'Comprehensive advisory and relocation services for companies and individuals.',
    logo: 'https://www.aurisrelocation.com/cstyle/6680750/images/logo.svg',
    rating: 4.8,
    reviews: 124,
    services: ['Immigration & Permits', 'Home Search', 'Cross-Cultural Training'],
    regions: ['zurich', 'geneva', 'basel', 'bern', 'lausanne']
  },
  {
    name: 'Anchor Relocation',
    id: 'anchor-relocation',
    specialty: 'Family & Corporate Relocations', 
    description: 'Professional relocation services with 20+ years of experience.',
    logo: 'https://res.cloudinary.com/dphbnwjtx/image/upload/v1748056028/anchor_logo_s1jbo3.webp',
    rating: 4.2,
    reviews: 87,
    services: ['Home Search', 'Settling-in', 'Immigration', 'Education'],
    regions: ['zurich', 'zug', 'lucerne']
  }
];

// Filter relocators that serve this region
const availableRelocators = regionalRelocators.filter(relocator => 
  relocator.regions.includes(currentRegionId.toLowerCase())
);

// Related blog posts for this region
const relatedBlogPosts = [
  {
    title: "Moving to " + region.data.name + ": Complete Visa Guide 2024",
    excerpt: "Everything you need to know about visa requirements, work permits, and legal procedures for relocating to " + region.data.name + ".",
    slug: 'swiss-visa-guide',
    readTime: '8 min read',
    category: 'Immigration'
  },
  {
    title: "Best Neighborhoods in " + region.data.name + " for Expats",
    excerpt: "Discover the most popular districts and neighborhoods where international residents choose to live in " + region.data.name + ".",
    slug: 'best-neighborhoods-expats',
    readTime: '6 min read',
    category: 'Housing'
  },
  {
    title: "Cost of Living Breakdown: " + region.data.name + " 2024",
    excerpt: "Detailed analysis of monthly expenses, housing costs, and budget planning for professionals moving to " + region.data.name + ".",
    slug: 'cost-of-living-breakdown',
    readTime: '10 min read',
    category: 'Financial Planning'
  },
  {
    title: "Working in " + region.data.name + ": Job Market Guide",
    excerpt: "Insights into the job market, salary expectations, and career opportunities in " + region.data.name + "'s key industries.",
    slug: 'job-market-guide',
    readTime: '7 min read',
    category: 'Career'
  }
];

// SEO metadata with enhanced keywords
const title = region.data.name + " Relocation Guide 2024: Moving to " + region.data.name + ", Switzerland | ReloFinder.ch";
const description = "Complete " + region.data.name + " relocation guide for expats. Find housing, immigration services, cost of living info, and relocation companies for moving to " + region.data.name + ", Switzerland.";
const keywords = region.data.name + " relocation, move to " + region.data.name + ", " + region.data.name + " expat guide, " + region.data.name + " immigration, " + region.data.name + " housing, " + region.data.name + " cost of living, Switzerland";
---

<Layout title={title} description={description}>
  <!-- Enhanced SEO meta tags -->
  <meta name="keywords" content={keywords} slot="head" />
  <meta property="og:title" content={title} slot="head" />
  <meta property="og:description" content={description} slot="head" />
  <meta property="og:image" content={heroImage} slot="head" />
  <meta property="og:type" content="article" slot="head" />
  <meta name="twitter:card" content="summary_large_image" slot="head" />
  <meta name="twitter:title" content={title} slot="head" />
  <meta name="twitter:description" content={description} slot="head" />
  <meta name="twitter:image" content={heroImage} slot="head" />
  
  <!-- Structured Data for SEO -->
  <script type="application/ld+json" slot="head">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "Complete Relocation Guide to " + region.data.name + ", Switzerland",
      "description": description,
      "image": heroImage,
      "author": {
        "@type": "Organization",
        "name": "ReloFinder.ch"
      },
      "publisher": {
        "@type": "Organization",
        "name": "ReloFinder.ch",
        "logo": {
          "@type": "ImageObject",
          "url": "https://res.cloudinary.com/dphbnwjtx/image/upload/v1751047383/SVG_sdmxdo.svg"
        }
      },
      "datePublished": "2024-01-01",
      "dateModified": "2024-01-01"
    }
  </script>

  <!-- Hero Section - Like Homepage Style -->
  <section class="relative py-20 bg-gradient-to-br from-gray-50 via-white to-blue-50 overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-30">
      <div class="absolute inset-0 bg-repeat" style="background-image: url(data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23e11d48%22%20fill-opacity%3D%220.05%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2230%22%20r%3D%224%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E);"></div>
    </div>

    <div class="container relative z-10">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        
        <!-- Left Content -->
        <div class="space-y-8 text-center lg:text-left">
          <!-- Breadcrumb -->
          <nav class="flex items-center justify-center lg:justify-start space-x-2 text-sm text-gray-600" aria-label="Breadcrumb">
            <a href="/" class="hover:text-primary-600 transition-colors">Home</a>
            <span>→</span>
            <a href="/regions" class="hover:text-primary-600 transition-colors">Regions</a>
            <span>→</span>
            <span class="text-gray-900">{region.data.name}</span>
          </nav>

          <!-- Badge -->
          <div class="inline-flex items-center px-4 py-2 rounded-full bg-emerald-50 border border-emerald-200 text-emerald-700 font-medium text-sm">
            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
            </svg>
            {region.data.canton} Canton • Switzerland
          </div>

          <!-- Main Headline -->
          <div class="space-y-4">
            <h1 class="text-4xl lg:text-6xl font-bold leading-tight tracking-tight">
              Relocation to
              <span class="bg-gradient-to-r from-primary-600 via-primary-500 to-secondary-600 bg-clip-text text-transparent block lg:inline">
                {region.data.name}
              </span>
            </h1>
            <p class="text-xl text-gray-600 leading-relaxed max-w-xl mx-auto lg:mx-0">
              {region.data.description}
            </p>
          </div>

          <!-- Key Stats -->
          <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-gray-200 text-center">
              <div class="text-2xl font-bold text-gray-900 mb-1">{population}</div>
              <div class="text-sm text-gray-600">Population</div>
            </div>
            <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-gray-200 text-center">
              <div class="text-2xl font-bold text-gray-900 mb-1">{relocationStats.expatsPercentage}%</div>
              <div class="text-sm text-gray-600">International</div>
            </div>
            <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-gray-200 text-center">
              <div class="text-2xl font-bold text-gray-900 mb-1">{relocationStats.satisfaction}/5</div>
              <div class="text-sm text-gray-600">Satisfaction</div>
            </div>
            <div class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-gray-200 text-center">
              <div class="text-2xl font-bold text-gray-900 mb-1">{relocationStats.avgMoveTime}</div>
              <div class="text-sm text-gray-600">Setup Time</div>
            </div>
          </div>

          <!-- CTA Buttons -->
          <div class="flex flex-col sm:flex-row gap-4">
            <button onclick="openModal('individual-lead-modal')" class="group relative inline-flex items-center justify-center px-8 py-4 font-semibold text-white bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
              Start Your {region.data.name} Journey
              <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
              </svg>
            </button>
                      <a href={"/companies?region=" + region.data.id} class="group inline-flex items-center justify-center px-8 py-4 font-semibold text-primary-700 bg-white border-2 border-primary-200 rounded-xl hover:bg-primary-50 transition-all duration-300">
            Find Local Experts
          </a>
          </div>
        </div>
        
        <!-- Right Side - Regional Image -->
        <div class="relative order-first lg:order-last">
          <div class="relative">
            <div class="absolute inset-0 bg-gradient-to-r from-primary-400 to-secondary-400 rounded-3xl rotate-3 transform scale-105 opacity-20"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl overflow-hidden">
              <img 
                src={heroImage} 
                alt={region.data.name + " Switzerland relocation guide - Beautiful city overview for expats"}
                class="w-full h-[400px] lg:h-[500px] object-cover rounded-3xl"
                loading="eager"
                fetchpriority="high"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end rounded-3xl">
                <div class="p-6 text-white">
                  <h3 class="text-2xl font-bold mb-2">Welcome to {region.data.name}!</h3>
                  <p class="text-lg opacity-90">Your Swiss adventure starts here</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Overview Banner -->
  <section class="py-16 bg-gradient-to-r from-primary-600 to-primary-700 text-white">
    <div class="container">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-6">Why Choose {region.data.name} for Your Relocation?</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
          {highlights.slice(0, 4).map((highlight) => (
            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4">
              <p class="text-white/90">{highlight}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Complete Guide Section -->
  <section class="py-32 bg-gradient-to-br from-gray-50 via-white to-blue-50">
    <div class="container">
      <div class="max-w-6xl mx-auto">
        <!-- Section Header -->
        <div class="text-center mb-16">
          <h2 class="text-4xl font-bold mb-6">
            Complete Guide to <span class="bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">{region.data.name}</span>
          </h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Everything you need to know about living, working, and thriving in {region.data.name}
          </p>
        </div>

        <!-- Introduction Card -->
        <div class="bg-white rounded-3xl shadow-lg border border-gray-100 p-8 mb-12">
          <div class="text-center mb-8">
            <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
              </svg>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-4">Living in {region.data.name}: The Ultimate Expat Guide</h3>
            <div class="prose prose-lg prose-gray max-w-none text-gray-700">
              <p>{region.data.name} consistently ranks among the world's most livable cities, and for good reason. This cosmopolitan metropolis seamlessly blends Swiss tradition with international flair, offering unparalleled opportunities for career growth while maintaining an exceptional quality of life.</p>
            </div>
          </div>
        </div>

        <!-- Content Grid - Broken into Sections -->
        <div class="grid lg:grid-cols-2 gap-8 mb-16">
          
          <!-- Why Choose Section -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mr-4">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-gray-900">Why Choose {region.data.name}?</h3>
            </div>
            
            <div class="space-y-6">
              <div class="border-l-4 border-primary-500 pl-4">
                <h4 class="font-bold text-gray-900 mb-2">Economic Powerhouse</h4>
                <p class="text-gray-700 text-sm">Home to global financial giants like UBS and Credit Suisse, {region.data.name} is the undisputed financial capital of Switzerland. The city also hosts European headquarters for tech companies like Google, Microsoft, and numerous successful startups.</p>
              </div>
              
              <div class="border-l-4 border-secondary-500 pl-4">
                <h4 class="font-bold text-gray-900 mb-2">Quality of Life</h4>
                <ul class="text-gray-700 text-sm space-y-1">
                  <li>• World-class infrastructure: Pristine public transportation, excellent healthcare</li>
                  <li>• Natural beauty: Stunning lakes and easy access to the Swiss Alps</li>
                  <li>• Cultural richness: Over 50 museums, world-renowned opera house</li>
                  <li>• Safety: One of the world's safest cities</li>
                </ul>
              </div>
              
              <div class="border-l-4 border-gray-400 pl-4">
                <h4 class="font-bold text-gray-900 mb-2">International Community</h4>
                <p class="text-gray-700 text-sm">With over {relocationStats.expatsPercentage}% of residents being foreign nationals, {region.data.name} offers a welcoming environment for expats. English is widely spoken in business settings.</p>
              </div>
            </div>
          </div>

          <!-- Districts & Neighborhoods -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mr-4">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-gray-900">Best Areas for Expats</h3>
            </div>
            
            <div class="space-y-4">
              {districts.length > 0 ? districts.slice(0, 3).map((district) => (
                <div class="border border-gray-200 rounded-lg p-4">
                  <div class="flex justify-between items-start mb-2">
                    <h4 class="font-bold text-gray-900">{district.name}</h4>
                    <span class="text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full">{district.avgRent}</span>
                  </div>
                  <p class="text-gray-700 text-sm mb-3">{district.description}</p>
                  <div class="flex flex-wrap gap-1">
                    {(district.characteristics || []).slice(0, 3).map((char) => (
                      <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">{char}</span>
                    ))}
                  </div>
                </div>
              )) : (
                <div class="space-y-3">
                  <div class="border-l-4 border-primary-500 pl-4">
                    <h4 class="font-bold text-gray-900 mb-1">City Center</h4>
                    <p class="text-gray-700 text-sm">Perfect for those wanting to be in the heart of the action with walking distance to major offices and cultural attractions.</p>
                  </div>
                  <div class="border-l-4 border-secondary-500 pl-4">
                    <h4 class="font-bold text-gray-900 mb-1">Residential Areas</h4>
                    <p class="text-gray-700 text-sm">Popular with young professionals and families, offering good mix of local and international residents.</p>
                  </div>
                  <div class="border-l-4 border-gray-400 pl-4">
                    <h4 class="font-bold text-gray-900 mb-1">Premium Districts</h4>
                    <p class="text-gray-700 text-sm">Upscale areas popular with finance professionals, offering beautiful views and high-end amenities.</p>
                  </div>
                </div>
              )}
            </div>
            
            <!-- Link to Housing Service -->
            <div class="mt-6 pt-4 border-t border-gray-200">
              <a href="/services/housing" class="inline-flex items-center text-primary-600 hover:text-primary-700 font-medium text-sm">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                Professional Housing Search Service →
              </a>
            </div>
          </div>

          <!-- Living Costs -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mr-4">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-gray-900">Living Costs & Budget</h3>
            </div>
            
            <div class="space-y-6">
              <div>
                <h4 class="font-bold text-gray-900 mb-3">Monthly Budget Estimates</h4>
                <div class="grid grid-cols-3 gap-3">
                  <div class="text-center p-3 bg-primary-50 rounded-lg">
                    <div class="font-bold text-primary-700">CHF 3,000-4,500</div>
                    <div class="text-xs text-primary-600">Single Professional</div>
                  </div>
                  <div class="text-center p-3 bg-secondary-50 rounded-lg">
                    <div class="font-bold text-secondary-700">CHF 4,500-6,500</div>
                    <div class="text-xs text-secondary-600">Couple</div>
                  </div>
                  <div class="text-center p-3 bg-gray-50 rounded-lg">
                    <div class="font-bold text-gray-700">CHF 7,000-10,000</div>
                    <div class="text-xs text-gray-600">Family of 4</div>
                  </div>
                </div>
              </div>
              
              <div>
                <h4 class="font-bold text-gray-900 mb-3">Key Expenses</h4>
                <div class="space-y-2 text-sm">
                  <div class="flex justify-between">
                    <span class="text-gray-600">1-Bedroom Apartment</span>
                    <span class="font-medium">CHF {livingCosts.oneBedroomApt.min}-{livingCosts.oneBedroomApt.max}</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600">Public Transport</span>
                    <span class="font-medium">CHF {livingCosts.transportation}/month</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600">Groceries</span>
                    <span class="font-medium">CHF {livingCosts.groceries}/month</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-600">Health Insurance</span>
                    <span class="font-medium">CHF 300-500/month</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Getting Started -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mr-4">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-gray-900">Getting Started</h3>
            </div>
            
            <div class="space-y-4">
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                  <span class="text-sm font-bold text-primary-700">1</span>
                </div>
                <div>
                  <h4 class="font-bold text-gray-900 text-sm">Register with authorities</h4>
                  <p class="text-gray-600 text-xs">Within 14 days of arrival at the local residents' registration office</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-secondary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                  <span class="text-sm font-bold text-secondary-700">2</span>
                </div>
                <div>
                  <h4 class="font-bold text-gray-900 text-sm">Open a Swiss bank account</h4>
                  <p class="text-gray-600 text-xs">Required for most rentals and daily transactions</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                  <span class="text-sm font-bold text-primary-700">3</span>
                </div>
                <div>
                  <h4 class="font-bold text-gray-900 text-sm">Get health insurance</h4>
                  <p class="text-gray-600 text-xs">Mandatory within 3 months of arrival</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                  <span class="text-sm font-bold text-gray-700">4</span>
                </div>
                <div>
                  <h4 class="font-bold text-gray-900 text-sm">Apply for residence permit</h4>
                  <p class="text-gray-600 text-xs">If staying longer than 90 days, requirements vary by nationality</p>
                </div>
              </div>
            </div>
            
            <!-- Link to Immigration Service -->
            <div class="mt-6 pt-4 border-t border-gray-200">
              <a href="/services/immigration" class="inline-flex items-center text-primary-600 hover:text-primary-700 font-medium text-sm">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                </svg>
                Professional Immigration Services →
              </a>
            </div>
          </div>

        </div>

        <!-- Additional Sections Grid -->
        <div class="grid lg:grid-cols-3 gap-8">
          
          <!-- Working -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center mr-3">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h8z"/>
                </svg>
              </div>
              <h3 class="text-lg font-bold text-gray-900">Working</h3>
            </div>
            
            <div class="space-y-3 text-sm">
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Key Sectors</h4>
                <p class="text-gray-600">{relocationStats.topIndustries.join(', ')}</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Average Salaries</h4>
                <p class="text-gray-600">CHF 80,000-150,000+ for professionals</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Language</h4>
                <p class="text-gray-600">English sufficient for many roles, German helpful for advancement</p>
              </div>
            </div>
          </div>

          <!-- Family Life -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 bg-gradient-to-br from-secondary-500 to-secondary-600 rounded-lg flex items-center justify-center mr-3">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
              </div>
              <h3 class="text-lg font-bold text-gray-900">Family Life</h3>
            </div>
            
            <div class="space-y-3 text-sm">
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">International Schools</h4>
                <p class="text-gray-600">Premier international education options available</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Activities</h4>
                <p class="text-gray-600">Lake activities, mountain access, cultural events, parks</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Public Schools</h4>
                <p class="text-gray-600">High quality but conducted in local language</p>
              </div>
            </div>
          </div>

          <!-- Tips for Success -->
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 bg-gradient-to-br from-gray-500 to-gray-600 rounded-lg flex items-center justify-center mr-3">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                </svg>
              </div>
              <h3 class="text-lg font-bold text-gray-900">Tips for Success</h3>
            </div>
            
            <div class="space-y-3 text-sm">
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Cultural Integration</h4>
                <p class="text-gray-600">Learn basic German, join clubs, respect quiet hours, embrace punctuality</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900 mb-1">Money-Saving Tips</h4>
                <p class="text-gray-600">Shop at Aldi/Lidl, use happy hour deals, take advantage of free activities</p>
              </div>
            </div>
          </div>

        </div>

        <!-- Full Content Toggle -->
        <div class="text-center mt-12">
          <button onclick="toggleFullContent()" id="toggle-btn" class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-primary-600 to-primary-700 text-white font-medium rounded-xl hover:shadow-lg transition-all duration-300">
            <span id="toggle-text">Read Complete Guide</span>
            <svg id="toggle-arrow" class="w-5 h-5 ml-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </button>
        </div>

        <!-- Full Content (Hidden by default) -->
        <div id="full-content" class="hidden mt-12">
          <div class="bg-white rounded-3xl shadow-lg border border-gray-100 p-12">
            <div class="prose prose-xl prose-gray max-w-none 
                        prose-headings:font-bold prose-headings:text-gray-900 
                        prose-h1:text-4xl prose-h1:mb-8 prose-h1:text-center prose-h1:border-b prose-h1:border-gray-200 prose-h1:pb-6
                        prose-h2:text-3xl prose-h2:mt-16 prose-h2:mb-8 prose-h2:text-primary-700 prose-h2:border-l-4 prose-h2:border-primary-500 prose-h2:pl-6
                        prose-h3:text-2xl prose-h3:mt-12 prose-h3:mb-6 prose-h3:text-gray-800 prose-h3:font-semibold
                        prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-6
                        prose-strong:text-gray-900 prose-strong:font-semibold
                        prose-ul:my-6 prose-li:text-gray-700 prose-li:mb-2
                        prose-li:marker:text-primary-500
                        prose-a:text-primary-600 prose-a:no-underline hover:prose-a:underline
                        prose-blockquote:border-l-primary-500 prose-blockquote:bg-primary-50 prose-blockquote:rounded-r-lg prose-blockquote:p-6
                        prose-code:bg-gray-100 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm
                        prose-pre:bg-gray-900 prose-pre:rounded-lg
                        prose-table:my-8
                        prose-th:bg-gray-50 prose-th:font-semibold prose-th:text-gray-900
                        prose-td:text-gray-700">
              <Content />
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Related Blog Posts Section -->
  <section class="py-32 bg-white">
    <div class="container">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-4xl font-bold mb-6">
            Essential Reading for <span class="bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">{region.data.name}</span> Relocators
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            In-depth guides and expert insights to help you navigate your relocation to {region.data.name}
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
          {relatedBlogPosts.map((post) => (
            <article class="bg-gradient-to-br from-gray-50 to-white rounded-2xl p-6 border border-gray-100 hover:shadow-lg transition-all duration-300 group">
              <div class="mb-4">
                <span class="text-xs font-medium px-3 py-1 bg-primary-100 text-primary-700 rounded-full">{post.category}</span>
              </div>
              <h3 class="text-lg font-bold text-gray-900 mb-3 group-hover:text-primary-600 transition-colors">
                {post.title}
              </h3>
              <p class="text-gray-600 text-sm mb-4 leading-relaxed">
                {post.excerpt}
              </p>
              <div class="flex items-center justify-between text-xs text-gray-500">
                <span>{post.readTime}</span>
                <a href={"/blog/" + post.slug} class="inline-flex items-center text-primary-600 hover:text-primary-700 font-medium">
                  Read More
                  <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </a>
              </div>
            </article>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Professional Relocators Section -->
  {availableRelocators.length > 0 && (
    <section class="py-32 bg-gradient-to-br from-gray-50 via-white to-blue-50">
      <div class="container">
        <div class="text-center mb-16">
          <h2 class="text-4xl font-bold mb-6">
            Professional Relocators in <span class="bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">{region.data.name}</span>
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Trusted relocation companies with proven expertise in {region.data.name}
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
          {availableRelocators.map((relocator) => (
            <div class="bg-white rounded-2xl p-8 border border-gray-100 hover:shadow-lg transition-all duration-300 group">
              <div class="text-center mb-6">
                <div class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 overflow-hidden shadow-sm">
                  <img 
                    src={relocator.logo} 
                    alt={relocator.name + " - " + region.data.name + " relocation services"}
                    class="w-12 h-12 object-contain"
                  />
                </div>
                <h3 class="text-xl font-bold text-gray-900 mb-2">{relocator.name}</h3>
                <p class="text-gray-600 text-sm">{relocator.specialty}</p>
              </div>

              <p class="text-gray-700 text-sm mb-6 leading-relaxed text-center">
                {relocator.description}
              </p>

              <div class="flex items-center justify-center space-x-2 mb-6">
                <div class="flex space-x-1">
                  {[...Array(5)].map((_, i) => (
                    <svg class={"w-4 h-4 " + (i < Math.floor(relocator.rating) ? 'text-yellow-400' : 'text-gray-300')} fill="currentColor" viewBox="0 0 20 20">
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                  ))}
                </div>
                <span class="text-sm font-medium text-gray-700">{relocator.rating} ({relocator.reviews})</span>
              </div>

              <div class="space-y-2 mb-8">
                <div class="text-xs font-semibold text-gray-700 mb-3 text-center">Services:</div>
                <div class="flex flex-wrap gap-2 justify-center">
                  {relocator.services.slice(0, 3).map((service) => (
                    <span class="px-3 py-1 rounded-full text-xs bg-primary-100 text-primary-700">
                      {service}
                    </span>
                  ))}
                </div>
              </div>

              <div class="flex space-x-2">
                <a href={"/companies/" + relocator.id} class="flex-1 text-center py-3 font-medium rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white hover:shadow-lg transition-all duration-300 text-sm">
                  View Details
                </a>
                <button onclick="openModal('individual-lead-modal')" class="px-4 py-3 border-2 border-primary-300 text-primary-700 hover:bg-primary-50 rounded-xl transition-all duration-300">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                  </svg>
                </button>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Final CTA -->
  <section class="py-32 bg-gradient-to-br from-primary-600 to-secondary-600 text-white">
    <div class="container">
      <div class="text-center max-w-4xl mx-auto">
        <h2 class="text-4xl md:text-5xl font-bold mb-8">
          Ready to Make {region.data.name} Your New Home?
        </h2>
        <p class="text-xl mb-12 opacity-90">
          Join thousands of successful expats who chose {region.data.name} for their Swiss adventure. Get personalized guidance from local experts.
        </p>
        
        <div class="flex flex-col sm:flex-row gap-6 justify-center mb-16">
          <button onclick="openModal('individual-lead-modal')" class="bg-white text-primary-600 font-bold px-10 py-5 rounded-xl hover:bg-gray-50 transition-colors text-lg">
            Start My {region.data.name} Journey
          </button>
          <a href={"/companies?region=" + region.data.id} class="border-2 border-white text-white font-bold px-10 py-5 rounded-xl hover:bg-white/10 transition-colors text-lg">
            Find Local Experts
          </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
          <div class="bg-white/10 rounded-2xl p-6">
            <div class="text-4xl font-bold mb-2">{relocationStats.expatsPercentage}%</div>
            <div class="text-sm opacity-75">International Community</div>
          </div>
          <div class="bg-white/10 rounded-2xl p-6">
            <div class="text-4xl font-bold mb-2">{relocationStats.satisfaction}/5</div>
            <div class="text-sm opacity-75">Expat Satisfaction Rating</div>
          </div>
          <div class="bg-white/10 rounded-2xl p-6">
            <div class="text-4xl font-bold mb-2">{relocationStats.avgMoveTime}</div>
            <div class="text-sm opacity-75">Average Setup Time</div>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  function toggleFullContent() {
    const fullContent = document.getElementById('full-content');
    const toggleBtn = document.getElementById('toggle-btn');
    const toggleText = document.getElementById('toggle-text');
    const toggleArrow = document.getElementById('toggle-arrow');
    
    if (fullContent && toggleBtn && toggleText && toggleArrow) {
      if (fullContent.classList.contains('hidden')) {
        fullContent.classList.remove('hidden');
        toggleText.textContent = 'Hide Complete Guide';
        toggleArrow.style.transform = 'rotate(180deg)';
        fullContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        fullContent.classList.add('hidden');
        toggleText.textContent = 'Read Complete Guide';
        toggleArrow.style.transform = 'rotate(0deg)';
        toggleBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }
  }
</script>