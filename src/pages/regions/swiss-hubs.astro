---
import { 
  MapPin, 
  Building2, 
  Star, 
  ArrowRight, 
  Home, 
  ChevronDown,
  FileText,
  Download,
  Feather,
  CheckCircle2,
  Info
} from 'lucide-react';
import '../../styles/global.css';
import '../../styles/alpine-clarity.css';
import SEOHead from '../../components/common/SEOHead.astro';
import UniversalContactModal from '../../components/common/UniversalContactModal.tsx';
import '../../lib/expose-modal-stores.client.ts';
import Navbar from '../../components/layout/Navbar.astro';
import Footer from '../../components/layout/Footer.astro';
import HeroSearch from '../../components/home/HeroSearch.tsx';

// --- Data & Content ---

const hubs = [
  {
    name: "Bern (Capital)",
    type: "Politics & Diplomacy",
    desc: "The UNESCO Old Town. Slower pace, high quality of life. Home to embassies, federal employees, and a global diplomatic corps.",
    rent: "CHF 2,200 - 3,800",
    vibe: "Historic & Calm"
  },
  {
    name: "Lucerne (Central)",
    type: "The Heart of Switzerland",
    desc: "Stunning lake and mountain views. Tax-efficient suburbs like Meggen. A popular choice for those commuting to Zug or ZÃ¼rich.",
    rent: "CHF 2,400 - 4,500",
    vibe: "Scenic & Connected"
  },
  {
    name: "Lugano (Ticino)",
    type: "The Mediterranean City",
    desc: "Italian culture blended with Swiss banking efficiency. Switzerland's third largest financial center with a sun-drenched lifestyle.",
    rent: "CHF 2,100 - 4,200",
    vibe: "Sunny & Cosmopolitan"
  },
  {
    name: "Montreux (Vaud)",
    type: "The Riviera",
    desc: "Famous for its Jazz festival, world-class international schools, and the mildest climate north of the Alps. Pure lakeside luxury.",
    rent: "CHF 2,600 - 4,800",
    vibe: "Chic & Relaxed"
  },
  {
    name: "St. Gallen (East)",
    type: "The Academic Hub",
    desc: "Home to the world-renowned HSG University. Gateway to Germany and Austria. Affordable, green, and culturally rich.",
    rent: "CHF 1,800 - 3,200",
    vibe: "Youthful & Efficient"
  }
];

const costOfLiving = [
  { category: "Rent (3.5 rooms)", cost: "CHF 1,800 - 4,500", note: "10-20% lower than ZÃ¼rich" },
  { category: "Health Insurance", cost: "CHF 350 - 550", note: "Varies significantly by canton" },
  { category: "Public Transport", cost: "CHF 80 - 100", note: "Regional monthly passes" },
  { category: "Local Taxes", cost: "Moderate", note: "Varies by municipality" },
];

const faqs = [
  {
    q: "Is German spoken everywhere in these hubs?",
    a: "No. Switzerland is quadrilingual. Bern, Lucerne, and St. Gallen are German-speaking. Montreux is French-speaking, and Lugano is Italian-speaking. English is widely understood in business and diplomatic circles."
  },
  {
    q: "Is Lucerne a good place for expats?",
    a: "Yes, it's highly popular for families and professionals. It offers a perfect balance of lake/mountain scenery and urban convenience, with many high-earners living in Lucerne while commuting to Zug or ZÃ¼rich for work."
  },
  {
    q: "Where do diplomats usually live in Bern?",
    a: "The most prestigious and common districts for the diplomatic corps are Kirchenfeld and Muri, known for their grand villas, embassy buildings, and proximity to the federal center."
  }
];

---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <SEOHead 
      title="Relocation to Major Swiss Hubs: 2026 City Guide | ReloFinder"
      description="Beyond ZÃ¼rich and Geneva. A strategic guide to moving to Bern, Lucerne, Lugano, Montreux, and St. Gallen. Compare verified agencies and get free quotes."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        /* Swiss Passport Style Canton Cards Pattern */
        .canton-card-bg {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            color: #F1F5F9; 
            opacity: 0.4;
            line-height: 1;
        }
        
        /* Custom Gradient Text */
        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-image: linear-gradient(90deg, #2C3E50 0%, #FF6F61 100%);
        }
    </style>
</head>
<body class="font-sans text-slate-600 bg-[#F9FAFB] antialiased">

    <!-- 1. Navbar -->
    <Navbar />


    <!-- Hero Section -->
    <section class="relative py-20 lg:py-32 overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img 
                src="https://res.cloudinary.com/dphbnwjtx/image/upload/f_webp,q_auto:best/v1766824413/beat-bossert-VigWbF7EXNE-unsplash_susdcn.jpg" 
                alt="Lucerne Chapel Bridge with mountains in background" 
                class="w-full h-full object-cover"
            />
            <!-- Gradient overlay for contrast -->
            <div class="absolute inset-0 bg-gradient-to-b from-black/55 via-black/40 to-black/60"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <div class="max-w-4xl mx-auto mb-12">
                <span class="inline-block py-1.5 px-4 rounded-full bg-black/80 border border-black/20 text-white text-sm font-bold mb-6 tracking-wide uppercase">
                    2026 Region Guide
                </span>
                <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold tracking-tight text-white mb-6 leading-[1.1] drop-shadow-lg">
                    Relocation to <span class="text-[#FF6F61]">Swiss City Hubs</span>.
                </h1>
                <p class="text-lg md:text-xl text-white/90 font-medium max-w-2xl mx-auto drop-shadow-md">
                    Beyond the financial capitals. Discover the quality of life in Bern, Lucerne, Lugano, and on the Swiss Riviera.
                </p>
            </div>

            <!-- Lead Magnet: Hero Search (Lead Wizard) -->
            <div class="max-w-3xl mx-auto relative z-10 text-left">
               <div class="bg-white rounded-2xl shadow-xl shadow-slate-900/5 border border-slate-200 p-1">
                   <HeroSearch client:load prefilledDestination="other" />
               </div>
               <p class="text-center text-sm text-white/80 mt-6 font-medium drop-shadow">
                   Compare verified local relocation agencies. Get 3 quotes in 24h.
               </p>
            </div>
        </div>
    </section>

    <!-- 3. Strategic Overview: Why You Need Help -->
    <section class="py-24 bg-white border-y border-slate-100">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-8 text-center">
                Finding the right balance: Lifestyle vs. Commute.
            </h2>
            <div class="prose prose-lg prose-slate mx-auto text-slate-600 leading-relaxed">
                <p class="text-lg mb-6 text-center max-w-3xl mx-auto">
                    Switzerland is decentralized. You don't have to live in ZÃ¼rich to have a career. 
                    <span class="font-bold text-slate-900">Bern</span> hosts the diplomatic corps, 
                    <span class="font-bold text-slate-900">Lucerne</span> offers tax-efficient commuting, 
                    and <span class="font-bold text-slate-900">Montreux/Lugano</span> offer a Mediterranean lifestyle.
                </p>
                
                <div class="bg-[#F9FAFB] p-8 rounded-2xl border border-slate-200 my-10">
                    <p class="text-lg leading-relaxed mb-6">
                        Housing in these hubs is often more accessible than in ZÃ¼rich or Geneva, but competition 
                        for "Lake View" properties remains fierce. The administrative approach varies by canton, 
                        requiring local knowledge of and access to <a href="https://offlist.ch" class="text-[#FF6F61] font-medium hover:underline">off-market inventory</a>.
                    </p>
                    <p class="text-lg leading-relaxed font-medium text-slate-800">
                        <strong>Relofinder</strong> connects you with regional experts who understand the local nuances of the Swiss city hubs.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. Hub Destination Cards -->
    <section class="py-24 bg-[#F9FAFB] border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Discover the Major Hubs</h2>
                <p class="text-slate-500 text-lg">Five distinct cities, five unique Swiss experiences.</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {hubs.map(hub => (
                    <div class="bg-white rounded-2xl border border-slate-200 p-8 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex flex-col h-full">
                        <div class="mb-6">
                            <span class="inline-block px-3 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded-full uppercase tracking-wider">
                                {hub.type}
                            </span>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-800 mb-3">{hub.name}</h3>
                        <p class="text-slate-600 mb-8 leading-relaxed flex-grow">
                            {hub.desc}
                        </p>
                        <div class="border-t border-slate-100 pt-6 mt-auto">
                            <div class="flex justify-between items-center mb-3">
                                <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Est. Rent</span>
                                <span class="text-sm font-bold text-slate-800">{hub.rent}</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Vibe</span>
                                <span class="text-sm font-bold text-[#FF6F61]">{hub.vibe}</span>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
            
            <div class="mt-16 p-6 bg-white border border-slate-200 rounded-xl flex flex-col md:flex-row gap-6 items-center max-w-3xl mx-auto shadow-sm">
                <div class="p-3 bg-[#FF6F61]/10 rounded-full flex-shrink-0">
                    <Info className="w-6 h-6 text-[#FF6F61]" />
                </div>
                <div class="text-center md:text-left">
                    <p class="text-slate-800 text-sm leading-relaxed">
                        <strong class="block text-base mb-1">Local Inventory Access</strong> 
                        While accessible, the best rentals in these hubs often go to those with local connections. 
                        Use <a href="https://offlist.ch" target="_blank" class="font-bold underline decoration-[#FF6F61] decoration-2 underline-offset-2 hover:text-[#FF6F61] transition-colors">Offlist.ch</a> 
                        to bypass traditional platforms and find private landlords.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. Cost of Living -->
    <section class="py-24 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Cost of Living 2026</h2>
                <div class="w-24 h-1 bg-[#FF6F61] mx-auto rounded-full mb-8"></div>
                <p class="text-slate-500 text-lg max-w-2xl mx-auto mb-4">
                    Living outside the "Big Two" can reduce your housing costs by <span class="font-bold text-slate-900 bg-slate-100 px-2 py-0.5 rounded">15-20%</span>.
                </p>
                <p class="text-slate-500 text-base max-w-2xl mx-auto">
                    Regional hubs offer a more affordable entry point to the Swiss lifestyle without sacrificing amenities or infrastructure.
                </p>
            </div>

            <div class="bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm">
                <table class="w-full text-left">
                    <thead class="bg-slate-50 border-b border-slate-200">
                        <tr>
                            <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Item</th>
                            <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Cost Estimate</th>
                            <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest hidden sm:table-cell">Notes</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        {costOfLiving.map(item => (
                            <tr class="hover:bg-slate-50/50 transition-colors group">
                                <td class="p-6 font-bold text-slate-800 group-hover:text-[#FF6F61] transition-colors">{item.category}</td>
                                <td class="p-6 font-bold text-slate-700">{item.cost}</td>
                                <td class="p-6 text-slate-500 text-sm hidden sm:table-cell">{item.note}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>




            <!-- Interstitial CTA: Polished Dark Version -->
            <div class="mt-20 bg-[#1E293B] rounded-3xl p-12 md:p-16 text-center text-white relative overflow-hidden ring-1 ring-white/10 shadow-2xl">
                <div class="relative z-10 max-w-2xl mx-auto">
                    <h3 class="text-3xl md:text-4xl font-bold mb-6 tracking-tight text-white">Find Your Perfect Hub.</h3>
                    <p class="text-slate-300 text-lg mb-10 leading-relaxed">
                        Ready to discover Switzerland beyond the financial centers? Connect with verified regional specialists today.
                    </p>
                    <button onclick="window.universalOpenModal({ page: 'hubs_guide', topic: 'general_ota' })" class="inline-flex items-center gap-3 px-8 py-4 bg-[#FF6F61] hover:bg-[#f65d4e] text-white font-bold text-lg rounded-xl transition-all transform hover:-translate-y-1 shadow-lg">
                        <FileText className="w-5 h-5" />
                        Get Free Quotes
                    </button>
                    <p class="mt-6 text-slate-400 text-sm">Free service. No obligation.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. Relocation Timeline: Simple Card Layout -->
    <section class="py-24 bg-[#F9FAFB] border-t border-slate-200">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-16 text-center">Your Relocation Timeline</h2>
            
            <div class="space-y-8">
                <!-- Step 1 -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-[#FF6F61] rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg">
                            01
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">Planning</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Define the Region</h3>
                            <p class="text-slate-600 leading-relaxed">
                                Language matters: Bern/Lucerne (German), Montreux (French), Lugano (Italian). 
                                Your chosen hub dictates your administrative process and daily life language.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-slate-200 rounded-xl flex items-center justify-center text-slate-500 font-bold text-lg">
                            02
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">Search</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Secure Housing</h3>
                            <p class="text-slate-600 leading-relaxed">
                                Use <strong>Offlist.ch</strong> to find private landlords in these specific cantons. 
                                Many high-quality properties in Bern and Lucerne never reach the open portal market.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Registration -->
                <div class="bg-white rounded-2xl p-8 border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start gap-6">
                        <div class="shrink-0 w-14 h-14 bg-slate-200 rounded-xl flex items-center justify-center text-slate-500 font-bold text-lg">
                            03
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="px-3 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded-full uppercase tracking-wider border border-slate-200">Arrival</span>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">Registration</h3>
                            <p class="text-slate-600 leading-relaxed mb-4">
                                Register at your local <strong>Einwohnerkontrolle</strong> (German) or <strong>ContrÃ´le des habitants</strong> (French) within 14 days of arrival.
                            </p>
                            <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                                <p class="text-slate-700 text-sm leading-relaxed">
                                    <span class="font-bold">ðŸ’¡ Expert Tip:</span> Insurance premiums depend on your exact zip code. Use the 
                                    <a href="https://expat-savvy.ch/healthcare/best-health-insurance-switzerland/" target="_blank" rel="noopener" class="text-[#FF6F61] underline hover:text-[#f65d4e]">best health insurance guide</a> 
                                    at Expat-Savvy to compare providers and find the right plan.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- 7. Related Guides: Internal Linking -->
    <section class="py-24 bg-white border-t border-slate-100">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-4">Deep Dives & Market Insights</h2>
                <p class="text-slate-500 text-lg">Expert analysis for regional living.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <a href="/blog/best-relocation-agencies-switzerland-comparison" class="group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 block">
                    <div class="aspect-[16/9] overflow-hidden bg-slate-100">
                        <img 
                            src="https://images.unsplash.com/photo-1582650625119-3a31f8fa2699?w=600&h=340&fit=crop&fm=webp" 
                            alt="Swiss banking and finance" 
                            class="w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                        />
                    </div>
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="inline-block px-3 py-1 bg-[#FF6F61]/10 text-[#FF6F61] text-xs font-bold rounded-full uppercase tracking-wider">Market Study</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-[#FF6F61] transition-colors">Best Relocation Agencies Switzerland: A Transparency Guide</h3>
                        <p class="text-slate-600 text-sm leading-relaxed">Everything you need to know about professional support in Bern, Lucerne and beyond.</p>
                    </div>
                </a>

                <!-- Card 2 -->
                <a href="/blog/cost-of-living-switzerland-breakdown-2026" class="group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 block">
                    <div class="aspect-[16/9] overflow-hidden bg-slate-100">
                        <img 
                            src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=600&h=340&fit=crop&fm=webp" 
                            alt="Swiss finance" 
                            class="w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                        />
                    </div>
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="inline-block px-3 py-1 bg-[#FF6F61]/10 text-[#FF6F61] text-xs font-bold rounded-full uppercase tracking-wider">Finance</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-[#FF6F61] transition-colors">The Real Cost of Living in Switzerland: 2026 Guide</h3>
                        <p class="text-slate-600 text-sm leading-relaxed">A detailed breakdown of monthly expenses for families and professionals.</p>
                    </div>
                </a>

                <!-- Card 3 -->
                <a href="/blog/ultimate-guide-relocation-switzerland-2026" class="group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300 block">
                    <div class="aspect-[16/9] overflow-hidden bg-slate-100">
                        <img 
                            src="https://images.unsplash.com/photo-1519681393784-d120267933ba?w=600&h=340&fit=crop&fm=webp" 
                            alt="Swiss Alps panorama" 
                            class="w-full h-full object-cover grayscale group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                        />
                    </div>
                    <div class="p-6">
                        <div class="mb-3">
                            <span class="inline-block px-3 py-1 bg-[#FF6F61]/10 text-[#FF6F61] text-xs font-bold rounded-full uppercase tracking-wider">Guide</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-[#FF6F61] transition-colors">The Ultimate Guide to Relocation in Switzerland (2026)</h3>
                        <p class="text-slate-600 text-sm leading-relaxed">Everything you need to know about moving to Switzerland, step by step.</p>
                    </div>
                </a>
            </div>
        </div>
    </section>


    <!-- 8. FAQ Section -->
    <section class="py-24 bg-white border-t border-slate-100">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-2xl md:text-3xl font-bold text-slate-800 mb-10 text-center">Frequently Asked Questions</h2>
            <div class="space-y-4">
                {faqs.map((faq) => (
                    <details class="group bg-[#F9FAFB] border border-slate-200 rounded-lg overflow-hidden">
                        <summary class="flex justify-between items-center p-5 cursor-pointer font-semibold text-slate-800 hover:bg-slate-100 transition-colors select-none text-lg">
                            {faq.q}
                            <ChevronDown className="w-5 h-5 text-slate-400 group-open:rotate-180 transition-transform" />
                        </summary>
                        <div class="px-5 pb-6 pt-2 text-slate-600 leading-relaxed border-t border-slate-100">
                            {faq.a}
                        </div>
                    </details>
                ))}
            </div>
        </div>
    </section>

    <!-- 8. Footer -->
    <Footer theme="dark" />

    <!-- Modal Globals -->
    <div id="relofinder-modal-marker" data-relofinder-modal="pending" style="display: none;" aria-hidden="true"></div>
    <UniversalContactModal client:load />
    
    <!-- Scripts (Exact same as index.astro for modal handling) -->
    <script is:inline>
      if (typeof window !== 'undefined') {
        window.modalEventQueue = window.modalEventQueue || [];
        window.modalReady = false;
        
        // Define functions immediately
        window.universalOpenModal = function(context) {
          const resolvedContext = context && typeof context === 'object' ? context : { page: 'hubs_guide', topic: context };
          console.log('ðŸ“ž universalOpenModal called', resolvedContext);
          if (window.modalReady && window.relofinderModalStores) {
            window.relofinderModalStores.setContext(resolvedContext);
            window.relofinderModalStores.setOpen(true);
            return;
          }
          window.modalEventQueue.push({ kind: 'open', payload: resolvedContext });
        };

        window.closeModal = function() {
           if (window.modalReady && window.relofinderModalStores) {
            window.relofinderModalStores.setOpen(false);
          } else {
            window.modalEventQueue.push({ kind: 'close' });
          }
        };
      }
      
      // Browser-only setup
      if (typeof window !== 'undefined') {
        // Listen for React/Nanostores availability
        const checkInterval = setInterval(() => {
            if (window.relofinderModalStores) {
                window.modalReady = true;
                // Process queue
                window.modalEventQueue.forEach(item => {
                    if (item.kind === 'open') window.relofinderModalStores.setContext(item.payload), window.relofinderModalStores.setOpen(true);
                    if (item.kind === 'close') window.relofinderModalStores.setOpen(false);
                });
                window.modalEventQueue = [];
                clearInterval(checkInterval);
            }
        }, 100);
      }
    </script>
</body>
</html>
