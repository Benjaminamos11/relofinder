---
import Layout from '../../layouts/Layout.astro';
import ServiceLayout from '../../layouts/ServiceLayout.astro';
import CompanyCard from '../../components/companies/CompanyCard.astro';
import BlogCard from '../../components/blog/BlogCard.astro';

// Add const prerender directive
export const prerender = true;

// Add getStaticPaths export
export function getStaticPaths() {
  return [
    { params: { id: 'housing' } },
    { params: { id: 'legal' } },
    { params: { id: 'finance' } },
    { params: { id: 'education' } },
    { params: { id: 'health' } },
    { params: { id: 'transport' } },
    { params: { id: 'language' } }
  ];
}

// Get the service ID from the URL
const { id } = Astro.params;

// Define service type structure
type ServiceFeature = {
  title: string;
  description: string;
};

type ServiceData = {
  title: string;
  description: string;
  icon: string;
  longDescription: string;
  features: ServiceFeature[];
  gradient: string;
};

type ServicesObject = {
  [key: string]: ServiceData;
};

// Service data (in a real app, this would come from a database)
const services: ServicesObject = {
  housing: {
    title: 'Housing & Real Estate',
    description: 'Find your perfect home in Switzerland with expert assistance from real estate professionals who understand expat needs.',
    icon: 'home',
    gradient: 'from-red-600 to-rose-600',
    longDescription: `
      Finding suitable housing in Switzerland can be challenging due to the competitive market and strict rental regulations. Our housing and real estate services help expatriates navigate this process seamlessly.

      Whether you're looking to rent or buy, our network of real estate professionals can assist with:
      - Property search and viewings
      - Rental application support
      - Contract review and negotiation
      - Property purchase guidance
      - Temporary accommodation
    `,
    features: [
      {
        title: 'Property Search',
        description: 'Access to extensive property databases and off-market listings'
      },
      {
        title: 'Rental Support',
        description: 'Assistance with applications, contracts, and negotiations'
      },
      {
        title: 'Purchase Guidance',
        description: 'Expert advice on buying property in Switzerland'
      },
      {
        title: 'Legal Compliance',
        description: 'Ensure all housing arrangements meet Swiss regulations'
      }
    ]
  },
  legal: {
    title: 'Legal & Immigration',
    description: 'Expert assistance with visas, permits, and legal matters for a smooth relocation to Switzerland.',
    icon: 'document',
    gradient: 'from-blue-600 to-indigo-600',
    longDescription: `
      Navigating Swiss immigration law and legal requirements is crucial for a successful relocation. Our legal and immigration services provide comprehensive support throughout the process.

      Our network of legal experts can assist with:
      - Visa applications and renewals
      - Work and residence permits
      - Family reunification
      - Legal consultation
      - Document legalization
    `,
    features: [
      {
        title: 'Visa Processing',
        description: 'Expert handling of visa applications and requirements'
      },
      {
        title: 'Permit Applications',
        description: 'Support for work and residence permit processes'
      },
      {
        title: 'Legal Consultation',
        description: 'Professional advice on Swiss legal matters'
      },
      {
        title: 'Document Management',
        description: 'Assistance with document preparation and legalization'
      }
    ]
  },
  finance: {
    title: 'Financial Services',
    description: 'Navigate Swiss banking, investments, and financial planning with expert guidance tailored for expatriates.',
    icon: 'currency',
    gradient: 'from-green-600 to-emerald-600',
    longDescription: `
      Understanding the Swiss financial system is essential for expatriates. Our financial services connect you with experts who can help with banking, investments, tax planning, and more.

      Our network of financial professionals can assist with:
      - Banking setup and account management
      - Investment strategies for expatriates
      - Tax planning and compliance
      - Pension and retirement planning
      - Insurance solutions
    `,
    features: [
      {
        title: 'Banking Assistance',
        description: 'Help with setting up accounts and understanding Swiss banking'
      },
      {
        title: 'Investment Planning',
        description: 'Tailored investment strategies for your expatriate situation'
      },
      {
        title: 'Tax Optimization',
        description: 'Navigate Swiss tax regulations and optimize your tax situation'
      },
      {
        title: 'Retirement Planning',
        description: 'Long-term planning for pension and retirement needs'
      }
    ]
  },
  education: {
    title: 'Education & Schools',
    description: 'Find the right educational path for your children with our expert guidance on Swiss and international schools.',
    icon: 'school',
    gradient: 'from-amber-500 to-yellow-600',
    longDescription: `
      Switzerland offers a variety of educational options, from local public schools to prestigious international institutions. We help expatriate families navigate these choices to find the best fit.

      Our education experts can assist with:
      - School selection and application processes
      - Understanding the Swiss education system
      - International school options and admission requirements
      - Language programs and tutoring solutions
      - Higher education guidance
    `,
    features: [
      {
        title: 'School Selection',
        description: 'Personalized guidance on finding the right school for your children'
      },
      {
        title: 'Application Support',
        description: 'Assistance with admission procedures and documentation'
      },
      {
        title: 'Education Consulting',
        description: 'Expert advice on navigating Swiss and international curricula'
      },
      {
        title: 'Language Programs',
        description: 'Resources for language acquisition and integration'
      }
    ]
  },
  health: {
    title: 'Healthcare Services',
    description: 'Navigate the Swiss healthcare system with expert guidance, from insurance selection to finding the right medical providers.',
    icon: 'health',
    gradient: 'from-purple-600 to-indigo-600',
    longDescription: `
      Understanding the Swiss healthcare system is essential for expatriates. Our healthcare services connect you with experts who can help with insurance, finding doctors, and more.

      Our network of healthcare professionals can assist with:
      - Health insurance selection and enrollment
      - Finding doctors and specialists
      - Hospital and clinic recommendations
      - Prescription medication guidance
      - Wellness and preventive care options
    `,
    features: [
      {
        title: 'Insurance Guidance',
        description: 'Expert help selecting the right health insurance for your needs'
      },
      {
        title: 'Provider Matching',
        description: 'Find doctors and specialists who meet your needs and speak your language'
      },
      {
        title: 'Medical Navigation',
        description: 'Assistance with appointments, referrals, and medical administration'
      },
      {
        title: 'Healthcare Translation',
        description: 'Support for medical appointments and documentation'
      }
    ]
  },
  transport: {
    title: 'Transportation & Mobility',
    description: 'Expert guidance on navigating Swiss transportation options, from public transit to vehicle registration and driving licenses.',
    icon: 'transport',
    gradient: 'from-teal-500 to-cyan-600',
    longDescription: `
      Switzerland offers excellent transportation infrastructure, but navigating the systems and requirements can be complex. Our mobility experts help you understand your options and legal requirements.

      Our transportation services include assistance with:
      - Public transportation cards and passes
      - Driving license exchange and requirements
      - Vehicle import and registration
      - Car purchase or leasing guidance
      - Mobility solutions for families and commuters
    `,
    features: [
      {
        title: 'Transit Orientation',
        description: 'Guide to using Swiss public transportation efficiently'
      },
      {
        title: 'License Exchange',
        description: 'Support with driving license transfer and Swiss driving regulations'
      },
      {
        title: 'Vehicle Registration',
        description: 'Assistance with importing, purchasing, or registering vehicles'
      },
      {
        title: 'Mobility Planning',
        description: 'Customized transportation solutions for your lifestyle and needs'
      }
    ]
  },
  language: {
    title: 'Language & Integration',
    description: 'Accelerate your adaptation to Swiss life with language courses, cultural training, and integration support services.',
    icon: 'language',
    gradient: 'from-purple-500 to-pink-600',
    longDescription: `
      Language skills and cultural understanding are key to successfully integrating into Swiss society. Our language and integration services help you and your family adapt more quickly and comfortably.

      Our network of language professionals can assist with:
      - Language course selection and enrollment
      - Private tutoring arrangements
      - Cultural adaptation training
      - Integration and networking opportunities
      - Communication support for official matters
    `,
    features: [
      {
        title: 'Language Training',
        description: 'Customized language courses for various proficiency levels and needs'
      },
      {
        title: 'Cultural Workshops',
        description: 'Learn about Swiss customs, etiquette, and social expectations'
      },
      {
        title: 'Integration Programs',
        description: 'Activities and events to help you connect with local communities'
      },
      {
        title: 'Communication Support',
        description: 'Assistance with official correspondence and documentation'
      }
    ]
  }
  // Add other services as needed
};

// Get the specific service data
const service = services[id as keyof typeof services];

// Related companies (in a real app, this would be filtered from a database)
const relatedCompanies = [
  {
    id: 'relocation-experts',
    name: 'Swiss Relocation Experts',
    logo: 'https://images.pexels.com/photos/14936128/pexels-photo-14936128.jpeg?auto=compress&cs=tinysrgb&w=200',
    description: 'Full-service relocation agency with 15+ years of experience helping expats settle in Switzerland.',
    services: ['Housing Search', 'Immigration Support', 'School Search'],
    regions: ['Zürich', 'Basel', 'Geneva'],
    rating: 4.8,
    reviewCount: 245
  },
  {
    id: 'swiss-move',
    name: 'SwissMove',
    logo: 'https://images.pexels.com/photos/14936096/pexels-photo-14936096.jpeg?auto=compress&cs=tinysrgb&w=200',
    description: 'Premium moving and logistics services for international relocations to and within Switzerland.',
    services: ['International Moving', 'Storage Solutions', 'Pet Transport'],
    regions: ['Nationwide'],
    rating: 4.7,
    reviewCount: 183
  },
  {
    id: 'alpine-home',
    name: 'Alpine Home Finders',
    logo: 'https://images.pexels.com/photos/14936082/pexels-photo-14936082.jpeg?auto=compress&cs=tinysrgb&w=200',
    description: 'Boutique real estate agency specializing in finding rental and purchase properties for expats.',
    services: ['Rental Search', 'Property Purchase', 'Relocation Support'],
    regions: ['Zürich', 'Zug', 'Lucerne'],
    rating: 4.6,
    reviewCount: 156
  }
];

// Related blog posts
const relatedPosts = [
  {
    id: 'swiss-rental-guide',
    title: 'Complete Guide to Renting in Switzerland',
    excerpt: 'Everything you need to know about finding and securing a rental property in Switzerland, from application to move-in.',
    image: 'https://images.pexels.com/photos/323780/pexels-photo-323780.jpeg?auto=compress&cs=tinysrgb&w=800',
    category: 'Housing',
    author: 'Maria Schmidt',
    authorImage: 'https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=100',
    date: '2025-04-12',
    readTime: '8 min read'
  },
  {
    id: 'swiss-mortgage-guide',
    title: 'Understanding Swiss Mortgages',
    excerpt: 'A comprehensive guide to obtaining a mortgage in Switzerland, including requirements and process.',
    image: 'https://images.pexels.com/photos/7621138/pexels-photo-7621138.jpeg?auto=compress&cs=tinysrgb&w=800',
    category: 'Housing',
    author: 'Thomas Weber',
    authorImage: 'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=100',
    date: '2025-04-05',
    readTime: '10 min read'
  }
];

// Format date helper function
function formatDate(dateString: string): string {
  const options: Intl.DateTimeFormatOptions = { year: 'numeric', month: 'long', day: 'numeric' };
  return new Date(dateString).toLocaleDateString('en-US', options);
}

// Page metadata
const title = `${service.title} Services in Switzerland | ReloFinder.ch`;
const description = service.description;
---

<ServiceLayout title={title} description={description} service={service}>
  <!-- Hero Banner with Key Message -->
  <section class={`py-12 bg-gradient-to-r from-${service.gradient.split(' ')[0].replace('from-', '')}-50 to-${service.gradient.split(' ')[1].replace('to-', '')}-50`}>
    <div class="container">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-4xl font-bold mb-6">
          {service.title.split('&')[0]}
          <span class={`text-transparent bg-clip-text bg-gradient-to-r ${service.gradient}`}>
            {service.title.includes('&') ? '& ' + service.title.split('&')[1] : ''}
          </span>
        </h2>
        <p class="text-xl text-accent-700 mb-8">
          {service.description}
        </p>
        <div class="flex flex-wrap justify-center gap-4">
          <a href="#features" class={`btn btn-primary px-6 py-3 rounded-lg bg-gradient-to-r ${service.gradient} text-white font-medium hover:shadow-lg transition-all duration-300`}>
            Key Features
          </a>
          <a href="#contact" class={`btn btn-secondary px-6 py-3 rounded-lg border-2 border-${service.gradient.split(' ')[0].replace('from-', '')} text-${service.gradient.split(' ')[0].replace('from-', '')} font-medium hover:bg-${service.gradient.split(' ')[0].replace('from-', '')}-50 transition-all duration-300`}>
            Get Expert Help
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Service Details -->
  <section class="section bg-white">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <div class="prose prose-lg mb-12">
          <p class="text-lg text-accent-600 whitespace-pre-line">
            {service.longDescription}
          </p>
        </div>

        <div id="features" class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          {service.features.map((feature: ServiceFeature) => (
            <div class="card p-6 hover:shadow-md transition-all duration-300 rounded-xl border border-gray-100 relative overflow-hidden group">
              <!-- Subtle Gradient Hover Effect -->
              <div class={`absolute inset-0 rounded-xl p-0.5 bg-gradient-to-r ${service.gradient} opacity-0 group-hover:opacity-100 transition-all duration-300`}></div>
              <div class="relative bg-white rounded-xl p-5">
                <h3 class="text-xl font-semibold mb-3">{feature.title}</h3>
                <p class="text-accent-600">{feature.description}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Related Companies -->
  <section class="section bg-accent-50">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center mb-16">
        <h2 class="text-3xl font-bold mb-4">Trusted Service <span class={`text-transparent bg-clip-text bg-gradient-to-r ${service.gradient}`}>Providers</span></h2>
        <p class="text-lg text-accent-600">
          Connect with experienced companies specializing in {service.title.toLowerCase()}.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {relatedCompanies.map(company => (
          <CompanyCard company={company} />
        ))}
      </div>

      <div class="mt-12 text-center">
        <a href="/companies" class={`btn-primary px-6 py-3 rounded-lg bg-gradient-to-r ${service.gradient} text-white font-medium inline-flex items-center hover:shadow-lg transition-all duration-300`}>
          View All Companies
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Related Blog Posts -->
  <section class="section bg-white">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center mb-16">
        <h2 class="text-3xl font-bold mb-4">Related <span class={`text-transparent bg-clip-text bg-gradient-to-r ${service.gradient}`}>Articles</span></h2>
        <p class="text-lg text-accent-600">
          Learn more about {service.title.toLowerCase()} in Switzerland through our comprehensive guides and articles.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {relatedPosts.map(post => (
          <BlogCard post={post} formatDate={formatDate} />
        ))}
      </div>

      <div class="mt-12 text-center">
        <a href="/blog" class={`btn-primary px-6 py-3 rounded-lg bg-gradient-to-r ${service.gradient} text-white font-medium inline-flex items-center hover:shadow-lg transition-all duration-300`}>
          View All Articles
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Contact CTA -->
  <section id="contact" class="py-16 bg-accent-50">
    <div class="container">
      <div class={`bg-gradient-to-r ${service.gradient} rounded-2xl shadow-xl overflow-hidden`}>
        <div class="grid grid-cols-1 md:grid-cols-2">
          <div class="p-8 md:p-12 flex items-center">
            <div class="text-white max-w-lg">
              <h2 class="text-2xl md:text-3xl font-bold mb-4">Ready to get started?</h2>
              <p class="text-white/90 mb-8">
                Connect with our expert team to discuss your specific {service.title.toLowerCase()} needs and receive personalized recommendations.
              </p>
              <a href="/contact" class={`inline-flex items-center px-6 py-3 rounded-lg bg-white text-${service.gradient.split(' ')[0].replace('from-', '')} font-semibold hover:bg-white/90 transition-all duration-300`}>
                Schedule a Free Consultation
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              </a>
            </div>
          </div>
          <div class="hidden md:block relative">
            <img 
              src="https://images.pexels.com/photos/3184338/pexels-photo-3184338.jpeg?auto=compress&cs=tinysrgb&w=800" 
              alt="Team consulting" 
              class="w-full h-full object-cover"
            />
          </div>
        </div>
      </div>
    </div>
  </section>
</ServiceLayout>