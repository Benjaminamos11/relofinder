---
import Layout from '../../layouts/Layout.astro';
import CompanyCard from '../../components/companies/CompanyCard.astro';
import BlogCard from '../../components/blog/BlogCard.astro';

// Add getStaticPaths export
export function getStaticPaths() {
  return [
    { params: { id: 'housing' } },
    { params: { id: 'legal' } }
  ];
}

// Get the service ID from the URL
const { id } = Astro.params;

// Service data (in a real app, this would come from a database)
const services = {
  housing: {
    title: 'Housing & Real Estate',
    description: 'Find your perfect home in Switzerland with expert assistance from real estate professionals who understand expat needs.',
    icon: 'home',
    longDescription: `
      Finding suitable housing in Switzerland can be challenging due to the competitive market and strict rental regulations. Our housing and real estate services help expatriates navigate this process seamlessly.

      Whether you're looking to rent or buy, our network of real estate professionals can assist with:
      - Property search and viewings
      - Rental application support
      - Contract review and negotiation
      - Property purchase guidance
      - Temporary accommodation
    `,
    features: [
      {
        title: 'Property Search',
        description: 'Access to extensive property databases and off-market listings'
      },
      {
        title: 'Rental Support',
        description: 'Assistance with applications, contracts, and negotiations'
      },
      {
        title: 'Purchase Guidance',
        description: 'Expert advice on buying property in Switzerland'
      },
      {
        title: 'Legal Compliance',
        description: 'Ensure all housing arrangements meet Swiss regulations'
      }
    ]
  },
  legal: {
    title: 'Legal & Immigration',
    description: 'Expert assistance with visas, permits, and legal matters for a smooth relocation to Switzerland.',
    icon: 'document',
    longDescription: `
      Navigating Swiss immigration law and legal requirements is crucial for a successful relocation. Our legal and immigration services provide comprehensive support throughout the process.

      Our network of legal experts can assist with:
      - Visa applications and renewals
      - Work and residence permits
      - Family reunification
      - Legal consultation
      - Document legalization
    `,
    features: [
      {
        title: 'Visa Processing',
        description: 'Expert handling of visa applications and requirements'
      },
      {
        title: 'Permit Applications',
        description: 'Support for work and residence permit processes'
      },
      {
        title: 'Legal Consultation',
        description: 'Professional advice on Swiss legal matters'
      },
      {
        title: 'Document Management',
        description: 'Assistance with document preparation and legalization'
      }
    ]
  }
  // Add other services as needed
};

// Get the specific service data
const service = services[id];

// Related companies (in a real app, this would be filtered from a database)
const relatedCompanies = [
  {
    id: 'relocation-experts',
    name: 'Swiss Relocation Experts',
    logo: 'https://images.pexels.com/photos/14936128/pexels-photo-14936128.jpeg?auto=compress&cs=tinysrgb&w=200',
    description: 'Full-service relocation agency with 15+ years of experience helping expats settle in Switzerland.',
    services: ['Housing Search', 'Immigration Support', 'School Search'],
    regions: ['Zürich', 'Basel', 'Geneva'],
    rating: 4.8,
    reviewCount: 245
  },
  {
    id: 'swiss-move',
    name: 'SwissMove',
    logo: 'https://images.pexels.com/photos/14936096/pexels-photo-14936096.jpeg?auto=compress&cs=tinysrgb&w=200',
    description: 'Premium moving and logistics services for international relocations to and within Switzerland.',
    services: ['International Moving', 'Storage Solutions', 'Pet Transport'],
    regions: ['Nationwide'],
    rating: 4.7,
    reviewCount: 183
  },
  {
    id: 'alpine-home',
    name: 'Alpine Home Finders',
    logo: 'https://images.pexels.com/photos/14936082/pexels-photo-14936082.jpeg?auto=compress&cs=tinysrgb&w=200',
    description: 'Boutique real estate agency specializing in finding rental and purchase properties for expats.',
    services: ['Rental Search', 'Property Purchase', 'Relocation Support'],
    regions: ['Zürich', 'Zug', 'Lucerne'],
    rating: 4.6,
    reviewCount: 156
  }
];

// Related blog posts
const relatedPosts = [
  {
    id: 'swiss-rental-guide',
    title: 'Complete Guide to Renting in Switzerland',
    excerpt: 'Everything you need to know about finding and securing a rental property in Switzerland, from application to move-in.',
    image: 'https://images.pexels.com/photos/323780/pexels-photo-323780.jpeg?auto=compress&cs=tinysrgb&w=800',
    category: 'Housing',
    author: 'Maria Schmidt',
    authorImage: 'https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?auto=compress&cs=tinysrgb&w=100',
    date: '2025-04-12',
    readTime: '8 min read'
  },
  {
    id: 'swiss-mortgage-guide',
    title: 'Understanding Swiss Mortgages',
    excerpt: 'A comprehensive guide to obtaining a mortgage in Switzerland, including requirements and process.',
    image: 'https://images.pexels.com/photos/7621138/pexels-photo-7621138.jpeg?auto=compress&cs=tinysrgb&w=800',
    category: 'Housing',
    author: 'Thomas Weber',
    authorImage: 'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=100',
    date: '2025-04-05',
    readTime: '10 min read'
  }
];

// Format date helper function
function formatDate(dateString) {
  const options = { year: 'numeric', month: 'long', day: 'numeric' };
  return new Date(dateString).toLocaleDateString('en-US', options);
}

// Page metadata
const title = `${service.title} Services in Switzerland | ReloFinder.ch`;
const description = service.description;
---

<Layout title={title} description={description}>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-primary-600 to-primary-700 text-white py-16 md:py-24">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <div class="w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center" style="background: linear-gradient(to right, #cb356b, #bd3f32);">
          {service.icon === 'home' && (
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
          )}
          {service.icon === 'document' && (
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
          )}
        </div>
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-6 leading-tight">
          {service.title}
        </h1>
        <p class="text-lg md:text-xl text-white/90 mb-8">
          {service.description}
        </p>
        <a href="#contact" class="btn bg-white text-primary-600 hover:bg-white/90">
          Get Started
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Service Details -->
  <section class="section bg-white">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <div class="prose prose-lg mb-12">
          <p class="text-lg text-accent-600 whitespace-pre-line">
            {service.longDescription}
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          {service.features.map(feature => (
            <div class="card p-6">
              <h3 class="text-xl font-semibold mb-3">{feature.title}</h3>
              <p class="text-accent-600">{feature.description}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Related Companies -->
  <section class="section bg-accent-50">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center mb-16">
        <h2 class="text-3xl font-bold mb-4">Trusted Service <span class="gradient-text">Providers</span></h2>
        <p class="text-lg text-accent-600">
          Connect with experienced companies specializing in {service.title.toLowerCase()}.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {relatedCompanies.map(company => (
          <CompanyCard company={company} />
        ))}
      </div>

      <div class="mt-12 text-center">
        <a href="/companies" class="btn-primary">
          View All Companies
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Related Blog Posts -->
  <section class="section bg-white">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center mb-16">
        <h2 class="text-3xl font-bold mb-4">Related <span class="gradient-text">Articles</span></h2>
        <p class="text-lg text-accent-600">
          Learn more about {service.title.toLowerCase()} in Switzerland through our comprehensive guides and articles.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {relatedPosts.map(post => (
          <BlogCard post={post} formatDate={formatDate} />
        ))}
      </div>

      <div class="mt-12 text-center">
        <a href="/blog" class="btn-primary">
          Read More Articles
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Contact Form -->
  <section id="contact" class="section bg-accent-50">
    <div class="container">
      <div class="max-w-3xl mx-auto">
        <div class="card p-8">
          <h2 class="text-2xl font-bold mb-6 text-center">Get Personalized Assistance</h2>
          <p class="text-accent-600 text-center mb-8">
            Fill out the form below and we'll connect you with the right service providers for your needs.
          </p>

          <form class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label class="block text-sm font-medium text-accent-700 mb-1">First Name*</label>
                <input 
                  type="text" 
                  required 
                  class="w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-accent-700 mb-1">Last Name*</label>
                <input 
                  type="text" 
                  required 
                  class="w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-primary-500"
                />
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-accent-700 mb-1">Email*</label>
              <input 
                type="email" 
                required 
                class="w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-primary-500"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-accent-700 mb-1">Phone</label>
              <input 
                type="tel" 
                class="w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-primary-500"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-accent-700 mb-1">Message*</label>
              <textarea 
                required 
                rows="4"
                class="w-full px-4 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-primary-500"
              ></textarea>
            </div>

            <div class="flex items-start">
              <input 
                type="checkbox" 
                required
                class="mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"
              />
              <label class="ml-2 text-sm text-accent-600">
                I agree to the <a href="/privacy-policy" class="text-primary-600 hover:underline">Privacy Policy</a> and consent to having my data processed.
              </label>
            </div>

            <div class="text-center">
              <button type="submit" class="btn-primary">
                Submit Request
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</Layout>